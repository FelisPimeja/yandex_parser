# –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API Urent

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API —Å–µ—Ä–≤–∏—Å–∞ –∞—Ä–µ–Ω–¥—ã —Å–∞–º–æ–∫–∞—Ç–æ–≤ –∏ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤ Urent. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –∑–æ–Ω–∞—Ö –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç GeoJSON –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–∞—Ö.

## üó∫Ô∏è –¢–∏–ø—ã –∑–æ–Ω –≤ API Urent

API Urent —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–≤—É–º—è —Ç–∏–ø–∞–º–∏ –∑–æ–Ω:

### 1. **RENT ZONES (–ó–æ–Ω—ã –∞—Ä–µ–Ω–¥—ã)** 
–ü–æ–ª–∏–≥–æ–Ω—ã, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –æ–±–ª–∞—Å—Ç–∏ –≥–¥–µ –º–æ–∂–Ω–æ –±—Ä–∞—Ç—å –∏ –æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç.
- **API endpoint**: `/zones/rent?cityId=XXX`
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `{ id, name, center, coordinates[] }`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç –≥–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –∞—Ä–µ–Ω–¥–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
- **–°–∫—Ä–∏–ø—Ç—ã**: `fetch_all_zones.py`, `fetch_city_zones.py`

### 2. **RESTRICTION ZONES (–ó–æ–Ω—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)**
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–æ–Ω—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –≤–Ω—É—Ç—Ä–∏ rent zones.
- **API endpoint**: `/zones/rent?cityId=XXX` (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å rent zones)
- **–¢–∏–ø—ã**:
  - `lowSpeedZones` - –∑–æ–Ω—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏ (10-15 –∫–º/—á)
  - `restrictedZones` - –∑–æ–Ω—ã –∑–∞–ø—Ä–µ—Ç–∞ –ø–∞—Ä–∫–æ–≤–∫–∏
  - `notAllowedZones` - –∑–æ–Ω—ã –∑–∞–ø—Ä–µ—Ç–∞ –ø–æ–µ–∑–¥–æ–∫
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `{ id, name, center, coordinates[], speedLimitValue, scheduleType }`
- **–°–∫—Ä–∏–ø—Ç**: `convert_restriction_zones_to_geojson.py`

### 3. **CITY BOUNDARIES (–ì—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤)**
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ä–æ–¥–æ–≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–∞.
- **API endpoint**: `/zones/uses`
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: `{ id, cityId, cityAvailabilityStatus, coordinates[] }`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤ –∫–∞–∫–∏—Ö –≥–æ—Ä–æ–¥–∞—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–∏—Å
- **–°–∫—Ä–∏–ø—Ç—ã**: `fetch_all_cities.py`, `convert_cities_to_geojson.py`

---

**‚ö†Ô∏è –í–ê–ñ–ù–û**: –ù–µ –ø—É—Ç–∞—Ç—å —ç—Ç–∏ —Ç—Ä–∏ —Ç–∏–ø–∞ –∑–æ–Ω –º–µ–∂–¥—É —Å–æ–±–æ–π!

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ fetch_city_zones.py                    # –ó–∞–≥—Ä—É–∑–∫–∞ rent zones –≥–æ—Ä–æ–¥–∞ –ø–æ ID
‚îú‚îÄ‚îÄ fetch_all_cities.py                    # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤
‚îú‚îÄ‚îÄ fetch_all_zones.py                     # –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö rent zones —á–µ—Ä–µ–∑ API
‚îú‚îÄ‚îÄ convert_to_geojson.py                  # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è zones.json
‚îú‚îÄ‚îÄ convert_cities_to_geojson.py           # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è cities.json –≤ GeoJSON
‚îú‚îÄ‚îÄ convert_restriction_zones_to_geojson.py # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è restriction zones
‚îú‚îÄ‚îÄ config.json.example                    # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ README.md                              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ .gitignore                             # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îÇ
‚îú‚îÄ‚îÄ cities.json                            # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ (city boundaries)
‚îú‚îÄ‚îÄ all_rent_zones.geojson                 # –í—Å–µ RENT ZONES –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤
‚îú‚îÄ‚îÄ all_zones.geojson                      # City boundaries (AVAILABLE)
‚îî‚îÄ‚îÄ all_zones_including_frozen.geojson     # City boundaries (–≤—Å–µ)
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –ø–æ–ª—É—á–∏—Ç—å city boundaries (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å –≥—Ä–∞–Ω–∏—Ü—ã –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤ –≤ GeoJSON:

```bash
python3 convert_cities_to_geojson.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `cities.json`
- –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç –∏–ª–∏ –æ–Ω —Å—Ç–∞—Ä—à–µ 5 –¥–Ω–µ–π - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ API
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç city boundaries –≤ GeoJSON —Ñ–æ—Ä–º–∞—Ç
- –°–æ–∑–¥–∞—ë—Ç 2 —Ñ–∞–π–ª–∞:
  - `all_zones.geojson` - —Ç–æ–ª—å–∫–æ AVAILABLE city boundaries (~36)
  - `all_zones_including_frozen.geojson` - –≤—Å–µ city boundaries (~355)

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ RENT ZONES –¥–ª—è –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤

–ó–∞–≥—Ä—É–∑–∏—Ç—å **–∑–æ–Ω—ã –∞—Ä–µ–Ω–¥—ã** –¥–ª—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤:

```bash
python3 fetch_all_zones.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ AVAILABLE –≥–æ—Ä–æ–¥–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç rent zones
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ rent zones –≤ –æ–¥–∏–Ω GeoJSON
- –°–æ–∑–¥–∞—ë—Ç —Ñ–∞–π–ª: `all_rent_zones.geojson`

‚è±Ô∏è **–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è:** 1-2 –º–∏–Ω—É—Ç—ã (21 –≥–æ—Ä–æ–¥ √ó ~0.5 —Å–µ–∫ –∑–∞–¥–µ—Ä–∂–∫–∞)

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ rent zones –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –ø–æ ID

```bash
python3 fetch_city_zones.py <city_id> [output_name]
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å rent zones –ú–∞–π–∫–æ–ø–∞
python3 fetch_city_zones.py 64307422f158b50245fdae7d maykop

# –ó–∞–≥—Ä—É–∑–∏—Ç—å rent zones –¥—Ä—É–≥–æ–≥–æ –≥–æ—Ä–æ–¥–∞
python3 fetch_city_zones.py 5f96dd383719ad000142ba5a krasnodar
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ —Ñ–∞–π–ª–∞:
- `{–Ω–∞–∑–≤–∞–Ω–∏–µ}.json` - –∏—Å—Ö–æ–¥–Ω—ã–π JSON –æ—Ç–≤–µ—Ç –æ—Ç API (–≤–∫–ª—é—á–∞—è restriction zones)
- `{–Ω–∞–∑–≤–∞–Ω–∏–µ}.geojson` - —Å–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ rent zones –≤ GeoJSON

### 4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è restriction zones –≤ GeoJSON

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å JSON —Ñ–∞–π–ª —Å –æ—Ç–≤–µ—Ç–æ–º API (—Å–æ–¥–µ—Ä–∂–∏—Ç lowSpeedZones, restrictedZones, notAllowedZones):

```bash
python3 convert_restriction_zones_to_geojson.py <input_file.json> [output_file.geojson]
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
python3 convert_restriction_zones_to_geojson.py sochi_zones.json
```

–°–æ–∑–¥–∞—ë—Ç GeoJSON —Å —Ç—Ä–µ–º—è —Ç–∏–ø–∞–º–∏ restriction zones:
- `lowSpeedZone` - –∑–æ–Ω—ã —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å–∫–æ—Ä–æ—Å—Ç–∏
- `restrictedZone` - –∑–æ–Ω—ã –∑–∞–ø—Ä–µ—Ç–∞ –ø–∞—Ä–∫–æ–≤–∫–∏  
- `notAllowedZone` - –∑–æ–Ω—ã –∑–∞–ø—Ä–µ—Ç–∞ –ø–æ–µ–∑–¥–æ–∫

### 5. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –≥–æ—Ä–æ–¥–æ–≤

```bash
python3 fetch_all_cities.py
```

–ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ city boundaries –∏–∑ API –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `all_cities.json`

### 6. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ zones.json

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å JSON —Ñ–∞–π–ª —Å rent zones:

```bash
python3 convert_to_geojson.py
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `zones.json` ‚Üí `zones.geojson`

## üîê –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

–¢–æ–∫–µ–Ω Bearer –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è. –ß—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω:

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```bash
cp config.json.example config.json
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ `config.json` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω:
```json
{
  "bearer_token": "–≤–∞—à_–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
}
```

3. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
export URENT_TOKEN="–≤–∞—à_–Ω–æ–≤—ã–π_—Ç–æ–∫–µ–Ω"
python3 fetch_city_zones.py 64307422f158b50245fdae7d
```

### –°–ø–æ—Å–æ–± 3: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `fetch_city_zones.py` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `default_token` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `fetch_city_zones()`

## üîç –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Urent –Ω–∞ iOS/Android
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞:
   - **iOS/macOS**: Charles Proxy, Proxyman
   - **Android**: HTTP Toolkit, Charles Proxy
   - **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ**: mitmproxy
3. –°–¥–µ–ª–∞–π—Ç–µ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–∞—Ä—Ç—É)
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `backyard.urentbike.ru`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization: Bearer ...`
6. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –æ–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã—à–µ

## üìä API Endpoints

### –°–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤
```
GET https://backyard.urentbike.ru/gatewayclient/api/v3/zones/uses
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - availableCityTypes: available,frozen
  - locationLat: —à–∏—Ä–æ—Ç–∞
  - locationLng: –¥–æ–ª–≥–æ—Ç–∞
```

### –ó–æ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞
```
GET https://backyard.urentbike.ru/gatewayclient/api/v3/zones/rent
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - cityId: ID –≥–æ—Ä–æ–¥–∞
  - locationLat: —à–∏—Ä–æ—Ç–∞
  - locationLng: –¥–æ–ª–≥–æ—Ç–∞
  - useZoneId: ID –≥–æ—Ä–æ–¥–∞ (–¥—É–±–ª–∏—Ä—É–µ—Ç cityId)
```

### –î–æ—Å—Ç—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –∏ –ø–∞—Ä–∫–æ–≤–∫–∏
```
GET https://backyard.urentbike.ru/gatewayclient/api/v6/transports
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - latitude: —à–∏—Ä–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞
  - longitude: –¥–æ–ª–≥–æ—Ç–∞ —Ü–µ–Ω—Ç—Ä–∞ –ø–æ–∏—Å–∫–∞
  - locationLat: —à–∏—Ä–æ—Ç–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - locationLng: –¥–æ–ª–≥–æ—Ç–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - radiusByMeters: —Ä–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –≤ –º–µ—Ç—Ä–∞—Ö
  - withEBikes: –≤–∫–ª—é—á–∏—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥—ã (true/false)
  - zoom: —É—Ä–æ–≤–µ–Ω—å –∑—É–º–∞ –∫–∞—Ä—Ç—ã
  - includeEmptyParkings: –≤–∫–ª—é—á–∏—Ç—å –ø—É—Å—Ç—ã–µ –ø–∞—Ä–∫–æ–≤–∫–∏ (true/false)

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
  - parkings: –º–∞—Å—Å–∏–≤ –ø–∞—Ä–∫–æ–≤–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
  - transports: –º–∞—Å—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (–º–∞–∫—Å. 250)
  - useZoneId: ID –∞–∫—Ç–∏–≤–Ω–æ–π –∑–æ–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - useZoneIds: –º–∞—Å—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–æ–Ω

‚ö†Ô∏è –í–ê–ñ–ù–û: API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç –≤ 250 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∑–∞–ø—Ä–æ—Å!
–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç –±–ª–∏–∂–∞–π—à–∏–µ –æ–±—ä–µ–∫—Ç—ã.
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ —Ä–∞–¥–∏—É—Å–µ 1 –∫–º –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –°–æ—á–∏
curl "https://backyard.urentbike.ru/gatewayclient/api/v6/transports?includeEmptyParkings=true&latitude=43.585525&longitude=39.723062&locationLat=43.585525&locationLng=39.723062&radiusByMeters=1000&withEBikes=true&zoom=14" \
  -H "Authorization: Bearer YOUR_TOKEN"

# –ü–æ–ª—É—á–∏—Ç—å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç –≤ —Ä–∞–¥–∏—É—Å–µ 50 –∫–º
curl "https://backyard.urentbike.ru/gatewayclient/api/v6/transports?includeEmptyParkings=true&latitude=43.585525&longitude=39.723062&locationLat=43.585525&locationLng=39.723062&radiusByMeters=50000&withEBikes=true&zoom=11" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:**

```json
{
  "entries": {
    "parkings": [
      {
        "id": "...",
        "isEmpty": false,
        "countBikes": 0,
        "countScooters": 6,
        "location": { "lat": 43.604, "long": 39.732 },
        "radius": 15
      }
    ],
    "transports": [
      {
        "batteryPercent": 75,
        "identifier": "S.614787",
        "displayedIdentifier": "614-787",
        "type": "Scooter",
        "location": { "lat": 43.597, "long": 39.719 }
      }
    ]
  },
  "useZoneId": "608bc0e3e158803bfd7b93b3",
  "useZoneIds": ["608bc0e3e158803bfd7b93b3"],
  "errors": [],
  "succeeded": true
}
```

**–¢–∏–ø—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞:**
- `Scooter` - —ç–ª–µ–∫—Ç—Ä–æ—Å–∞–º–æ–∫–∞—Ç
- `EBike` - —ç–ª–µ–∫—Ç—Ä–æ–≤–µ–ª–æ—Å–∏–ø–µ–¥
- `Bike` - –æ–±—ã—á–Ω—ã–π –≤–µ–ª–æ—Å–∏–ø–µ–¥

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install requests
```

## üó∫Ô∏è –§–æ—Ä–º–∞—Ç GeoJSON

–°–∫—Ä–∏–ø—Ç—ã –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç [GeoJSON](https://geojson.org/):

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "64307422f158b50245fdae7d",
      "properties": {
        "id": "64307422f158b50245fdae7d",
        "cityId": "5f96dd383719ad000142ba5a",
        "cityAvailabilityStatus": "AVAILABLE",
        "center": { "lat": 44.609764, "lng": 40.100516 },
        "modalities": ["Scooter", "Bike"]
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[lng, lat], [lng, lat], ...]]
      }
    }
  ]
}
```

**–í–∞–∂–Ω–æ:** –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ GeoJSON –∏–º–µ—é—Ç —Ñ–æ—Ä–º–∞—Ç `[–¥–æ–ª–≥–æ—Ç–∞, —à–∏—Ä–æ—Ç–∞]` (–∞ –Ω–µ `[—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞]`)!

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–æ–Ω –≤ —Ñ–∞–π–ª–µ
python3 -c "import json; data=json.load(open('maykop.json')); print(len(data['data']))"

# –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å GeoJSON –æ–Ω–ª–∞–π–Ω
# –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ https://geojson.io –∏–ª–∏ https://geojsonlint.com

# –ö—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å JSON
python3 -m json.tool maykop.json > maykop_formatted.json
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –§–∞–π–ª `config.json` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`. 
**–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ git!**

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –¢–æ–∫–µ–Ω—ã –æ–±—ã—á–Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
- –ü—Ä–∏ –æ—à–∏–±–∫–µ 403 (Forbidden) –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º JSON: `{lat, lng}`
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ GeoJSON: `[lng, lat]` (–æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫!)
- –í—Å–µ –∑–æ–Ω—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ –ø–æ–ª–∏–≥–æ–Ω—ã (Polygon)

## üî¨ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã API —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞

### –õ–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤

API `/transports` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–º–∞–∫—Å–∏–º—É–º 250 —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤** –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–∞–¥–∏—É—Å–∞ –ø–æ–∏—Å–∫–∞.

**–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–¥–∏—É—Å–∞–º–∏ (–°–æ—á–∏, —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞):**

| –†–∞–¥–∏—É—Å | –°–∞–º–æ–∫–∞—Ç—ã | –í–µ–ª–æ—Å–∏–ø–µ–¥—ã | –í—Å–µ–≥–æ | –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–≤ |
|--------|----------|------------|-------|-------------------------|
| 1 –∫–º   | 93       | 42         | 135   | 31.1%                   |
| ~12 –∫–º | 189      | 61         | 250   | 24.4%                   |
| 100 –∫–º | 220      | 30         | 250   | 12.0%                   |

**–í—ã–≤–æ–¥—ã:**

1. **–õ–∏–º–∏—Ç 250 –µ–¥–∏–Ω–∏—Ü** —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Ä–∞–¥–∏—É—Å–µ ‚â•12 –∫–º
2. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–∞—ë—Ç –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ —Å–∞–º–æ–∫–∞—Ç–∞–º
3. **–î–ª—è –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –ø–æ –±–æ–ª—å—à–æ–º—É –≥–æ—Ä–æ–¥—É –Ω—É–∂–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –º–µ–Ω—å—à–∏–º–∏ —Ä–∞–¥–∏—É—Å–∞–º–∏
4. **–ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≤ —Ü–µ–Ω—Ç—Ä–µ:** ~135 –µ–¥–∏–Ω–∏—Ü —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –Ω–∞ —Ä–∞–¥–∏—É—Å 1 –∫–º (–æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –≤ –≥–æ—Ä–æ–¥–µ:**

1. –†–∞–∑–±–µ–π—Ç–µ –≥–æ—Ä–æ–¥ –Ω–∞ —Å–µ—Ç–∫—É —Å —Ä–∞–¥–∏—É—Å–æ–º 500-1000–º –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–æ—á–∫–∏
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `zoom=14` –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
3. –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ `latitude/longitude` –∏ `locationLat/locationLng` –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
4. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è

**–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á:**

```bash
# –ë—ã—Å—Ç—Ä—ã–π –æ–±–∑–æ—Ä –≥–æ—Ä–æ–¥–∞ (–æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å)
radiusByMeters=50000&zoom=11

# –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–π–æ–Ω–∞ (—Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
radiusByMeters=1000&zoom=14

# –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é
radiusByMeters=5000&zoom=13
```
