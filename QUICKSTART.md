# –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/FelisPimeja/urent_parser.git
cd urent_parser

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install requests

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–æ–∫–µ–Ω
cp config.json.example config.json
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å config.json –∏ –¥–æ–±–∞–≤–∏—Ç—å Bearer —Ç–æ–∫–µ–Ω
```

### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

Bearer —Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Urent:

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ—Ö–≤–∞—Ç–∞ HTTPS —Ç—Ä–∞—Ñ–∏–∫–∞:
   - **iOS/macOS**: [Proxyman](https://proxyman.io/) (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - **Android**: [HTTP Toolkit](https://httptoolkit.tech/)

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç HTTPS
3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Urent
4. –ù–∞–π–¥–∏—Ç–µ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –∫ `backyard.urentbike.ru`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization: Bearer ...`
6. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `config.json`:

```json
{
  "bearer_token": "–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
}
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:**
- –¢–æ–∫–µ–Ω—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤
- –ü—Ä–∏ –æ—à–∏–±–∫–µ 403 (Forbidden) –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ git!

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (–≤—Å—ë –∏ —Å—Ä–∞–∑—É)

```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≥–æ—Ä–æ–¥–∞
python3 fetch_cities.py

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –∑–æ–Ω—ã (–∞—Ä–µ–Ω–¥—ã + –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
python3 fetch_zones.py

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞—Ä–∫–æ–≤–∫–∏ –∏ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
python3 fetch_parkings.py
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- `output/cities.geojson` - –≤—Å–µ –≥–æ—Ä–æ–¥–∞ (AVAILABLE + FROZEN)
- `output/zones.geojson` - –≤—Å–µ –∑–æ–Ω—ã –∞—Ä–µ–Ω–¥—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- `output/parkings.geojson` - –ø–∞—Ä–∫–æ–≤–∫–∏
- `output/vehicles.geojson` - –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç

#### –¢–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –≥–æ—Ä–æ–¥–æ–≤ (–±—ã—Å—Ç—Ä–æ)

```bash
python3 fetch_cities.py
```

#### –ë–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ GeoJSON

```bash
python3 fetch_cities.py --noexport
```

–ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ —Å—ã—Ä—ã–µ JSON —Ñ–∞–π–ª—ã –≤ `output/tmp/`.

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ì–æ—Ä–æ–¥–∞ (cities.geojson)

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "id": "city_id",
      "properties": {
        "name": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
        "status": "AVAILABLE",
        "country": "–†–æ—Å—Å–∏—è",
        "timezone": "Europe/Moscow"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[[lng, lat], ...]]
      }
    }
  ]
}
```

### –ó–æ–Ω—ã (zones.geojson)

–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–∏–ø—ã –∑–æ–Ω:

**Rent Zones** (–∑–æ–Ω—ã –∞—Ä–µ–Ω–¥—ã):
```json
{
  "properties": {
    "type": "rentZone",
    "name": "–¶–µ–Ω—Ç—Ä",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "status": "AVAILABLE"
  }
}
```

**Low Speed Zones** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏):
```json
{
  "properties": {
    "type": "lowSpeedZone",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "rentZoneId": "parent_zone_id",
    "speedLimitValue": 15
  }
}
```

**Restricted Zones** (–∑–∞–ø—Ä–µ—Ç –ø–∞—Ä–∫–æ–≤–∫–∏):
```json
{
  "properties": {
    "type": "restrictedZone",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "rentZoneId": "parent_zone_id"
  }
}
```

**Not Allowed Zones** (–∑–∞–ø—Ä–µ—Ç –ø–æ–µ–∑–¥–æ–∫):
```json
{
  "properties": {
    "type": "notAllowedZone",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "rentZoneId": "parent_zone_id"
  }
}
```

### –ü–∞—Ä–∫–æ–≤–∫–∏ (parkings.geojson)

```json
{
  "type": "Feature",
  "properties": {
    "type": "parking",
    "name": "–ü–∞—Ä–∫–æ–≤–∫–∞ ‚Ññ1",
    "city": "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä",
    "capacity": 10,
    "address": "—É–ª. –ö—Ä–∞—Å–Ω–∞—è, 1"
  },
  "geometry": {
    "type": "Point",
    "coordinates": [lng, lat]
  }
}
```

### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç (vehicles.geojson)

```json
{
  "type": "Feature",
  "properties": {
    "type": "vehicle",
    "number": "1234",
    "vehicleType": "SCOOTER",
    "battery": 85,
    "model": "Ninebot",
    "status": "AVAILABLE"
  },
  "geometry": {
    "type": "Point",
    "coordinates": [lng, lat]
  }
}
```

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ 403: Forbidden

```
‚ùå –û—à–∏–±–∫–∞ 403: –¢–æ–∫–µ–Ω –∏—Å—Ç—ë–∫ –∏–ª–∏ –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
–û–±–Ω–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ config.json
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `config.json`.

### –§–∞–π–ª cities.json –Ω–µ –Ω–∞–π–¥–µ–Ω

–°–∫—Ä–∏–ø—Ç—ã `fetch_zones.py` –∏ `fetch_parkings.py` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑–æ–≤—É—Ç `fetch_cities.py` –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω.

### –ù–µ –≤—Å–µ –ø–∞—Ä–∫–æ–≤–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã

`fetch_parkings.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–¥–∏—É—Å 10–∫–º –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –∫–∞–∂–¥–æ–π rent zone. –≠—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –ø–æ–∫—Ä—ã–≤–∞—Ç—å –≤—Å–µ –ø–∞—Ä–∫–æ–≤–∫–∏. –í –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö –±—É–¥–µ—Ç —É–ª—É—á—à–µ–Ω–æ.

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```bash
rm -rf output/tmp/
```

–≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ JSON —Ñ–∞–π–ª—ã. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –≤—Å—ë –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ.

## üìÅ –§–∞–π–ª—ã

- `output/` - –≤—ã—Ö–æ–¥–Ω—ã–µ GeoJSON —Ñ–∞–π–ª—ã (–≤ git)
- `output/tmp/` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ JSON —Ñ–∞–π–ª—ã (–Ω–µ –≤ git)
- `config.json` - —Ç–æ–∫–µ–Ω (–Ω–µ –≤ git)
- `old_scripts/` - —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (–Ω–µ –≤ git)

## üîó –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [README.md](README.md) - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [API.md](API.md) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API Urent
- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç](https://urentbike.ru/)
